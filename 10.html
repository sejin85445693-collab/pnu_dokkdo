<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ ì—­ì‚¬ ë° ì£¼ê¶Œ íƒ€ì„ë¼ì¸ (History of Dokdo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Chosen Palette: Warm Neutrals with Indigo Authority -->
    <!-- Application Structure Plan: 
         1. Dashboard Header: Intro and context.
         2. Visual Analytics: Two charts (Frequency over time, Type of Evidence) to give a high-level overview of the dataset before diving into details.
         3. Interactive Controls: Filters for eras and search to manage the long list of data.
         4. Timeline Flow: A vertical timeline (left) paired with detailed cards (right) to allow linear reading or specific data lookup.
         This structure transforms a flat list into an explorative historical journey.
    -->
    <!-- Visualization & Content Choices:
         - Bar Chart: To show the density of historical records in different centuries (Goal: Inform/Compare).
         - Doughnut Chart: To categorize the types of documents (Maps, Official Decrees, etc.) (Goal: Organize/Inform).
         - Vertical Timeline: Standard historical presentation (Goal: Change/Flow).
         - NO SVG/Mermaid used. Unicode icons used for visual cues.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f5f4; /* stone-100 */
        }

        /* Chart Container Styling per requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Timeline connector line */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 15px;
            width: 2px;
            background: #e5e7eb; /* gray-200 */
            z-index: 0;
        }

        .timeline-node {
            z-index: 10;
        }

        /* Custom Scrollbar for card list */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="text-stone-800 antialiased">

    <!-- App Container -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Home Button -->
        <div class="flex justify-start mb-6">
            <a href="index.html" class="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm border border-stone-200 text-stone-600 hover:text-slate-800 hover:border-slate-300 transition-all text-sm font-medium">
                <span>ğŸ </span> í™ˆìœ¼ë¡œ
            </a>
        </div>

        <!-- Header Section -->
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-bold text-slate-800 mb-4">ë…ë„: ì—­ì‚¬ì™€ ì£¼ê¶Œì˜ ê¸°ë¡</h1>
            <p class="text-lg text-stone-600 max-w-3xl mx-auto leading-relaxed">
                ì´ ì¸í„°ë™í‹°ë¸Œ íƒ€ì„ë¼ì¸ì€ 15ì„¸ê¸°ë¶€í„° í˜„ëŒ€ì— ì´ë¥´ê¸°ê¹Œì§€ ë…ë„ê°€ í•œêµ­ì˜ ì˜í† ì„ì„ ì…ì¦í•˜ëŠ” ì£¼ìš” ì—­ì‚¬ì  ì‚¬ê±´ê³¼ ì‚¬ë£Œë¥¼ ì‹œê°í™”í•œ ê²ƒì…ë‹ˆë‹¤.
                ê³ ì§€ë„, ì •ë¶€ ë¬¸ì„œ, ê·¸ë¦¬ê³  êµ­ì œ ì¡°ì•½ì„ í†µí•´ ë…ë„ì˜ ì—­ì‚¬ë¥¼ íƒí—˜í•´ ë³´ì„¸ìš”.
            </p>
        </header>

        <!-- Dashboard / Visualizations -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            
            <!-- Chart 1: Temporal Distribution -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                <div class="mb-4">
                    <h2 class="text-xl font-semibold text-slate-800 flex items-center gap-2">
                        <span>ğŸ“Š</span> ì‹œëŒ€ë³„ ê¸°ë¡ ë¹ˆë„
                    </h2>
                    <p class="text-sm text-stone-500 mt-1">
                        ê° ì„¸ê¸°ë³„ ì£¼ìš” ì‚¬ê±´ ë° ê¸°ë¡ì˜ ë¶„í¬ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. 20ì„¸ê¸° ì´í›„ ì˜ìœ ê¶Œ ê°ˆë“±ê³¼ ìˆ˜í˜¸ í™œë™ì´ ì§‘ì¤‘ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
                <div class="w-full flex flex-col justify-center items-center">
                    <div class="chart-container">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Chart 2: Evidence Type -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                <div class="mb-4">
                    <h2 class="text-xl font-semibold text-slate-800 flex items-center gap-2">
                        <span>ğŸ“œ</span> ì‚¬ë£Œ ë° ê·¼ê±° ìœ í˜•
                    </h2>
                    <p class="text-sm text-stone-500 mt-1">
                        ì—­ì‚¬ì  ê¸°ë¡ë¬¼ì˜ ì„±ê²©ì„ ë¶„ì„í•©ë‹ˆë‹¤. í•œêµ­ì˜ ë¬¸í—Œë¿ë§Œ ì•„ë‹ˆë¼ ì¼ë³¸ì˜ ê³µì‹ ë¬¸ì„œê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ëŠ” ì ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
                    </p>
                </div>
                <div class="w-full flex flex-col justify-center items-center">
                    <div class="chart-container">
                        <canvas id="sourceChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Controls -->
        <section class="bg-white sticky top-0 z-30 p-4 rounded-lg shadow-md border border-stone-200 mb-8 transition-all duration-300" id="control-bar">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                
                <!-- Era Filters -->
                <div class="flex flex-wrap gap-2 justify-center md:justify-start" id="filter-container">
                    <button class="filter-btn active px-4 py-2 rounded-full text-sm font-medium transition-colors bg-slate-800 text-white hover:bg-slate-700" data-filter="all">
                        ì „ì²´ ë³´ê¸°
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-stone-100 text-stone-600 hover:bg-stone-200" data-filter="pre-1900">
                        ì¡°ì„ /ëŒ€í•œì œêµ­ (~1899)
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-stone-100 text-stone-600 hover:bg-stone-200" data-filter="1900-1950">
                        ê·¼ëŒ€/ì¼ì œê°•ì ê¸° (1900~1950)
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-colors bg-stone-100 text-stone-600 hover:bg-stone-200" data-filter="modern">
                        í˜„ëŒ€ (1951~)
                    </button>
                </div>

                <!-- Search -->
                <div class="w-full md:w-auto relative">
                    <span class="absolute left-3 top-2.5 text-stone-400">ğŸ”</span>
                    <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ (ì˜ˆ: ì•ˆìš©ë³µ, ì¹™ë ¹, ì¡°ì•½)" 
                        class="w-full md:w-64 pl-10 pr-4 py-2 bg-stone-50 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500 text-sm">
                </div>
            </div>
        </section>

        <!-- Main Content: Timeline & Cards -->
        <section class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- Left: Timeline Navigation (Visual) -->
            <div class="lg:col-span-12">
                <div class="relative timeline-line pl-2" id="timeline-container">
                    <!-- Dynamic Content Will Be Injected Here -->
                </div>
                
                <div id="no-results" class="hidden text-center py-10 bg-white rounded-lg border border-dashed border-stone-300">
                    <p class="text-stone-500 text-lg">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    <button onclick="resetFilters()" class="mt-2 text-blue-600 hover:underline text-sm">í•„í„° ì´ˆê¸°í™”</button>
                </div>
            </div>

        </section>

        <!-- Footer -->
        <footer class="mt-16 border-t border-stone-200 pt-8 text-center text-stone-500 text-sm">
            <p>ë°ì´í„° ì¶œì²˜: ì œê³µëœ ë…ë„ ì—­ì‚¬ ë° ê´€ë ¨ ì‚¬ë£Œ ì •ë¦¬ ë¬¸ì„œ.</p>
            <p class="mt-2">&copy; 2026 Dokdo History Interactive Visualization.</p>
        </footer>

    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Source ---
        const rawData = [
            { year: 1454, event: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ ê¸°ë¡", desc: "ë…ë„ê°€ ìš¸ì§„í˜„ ì •ë™ìª½ ë°”ë‹¤ì— ìˆìœ¼ë©°, ìš¸ë¦‰ë„ì™€ ë©€ì§€ ì•Šì•„ ë§‘ì€ ë‚  ë³¼ ìˆ˜ ìˆë‹¤ê³  ê¸°ë¡ë¨.", source: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ [1]", type: "korea_record" },
            { year: 1481, event: "íŒ”ë„ì´ë„ ì œì‘", desc: "ë™í•´ìƒì— ìš¸ë¦‰ë„ì™€ ìš°ì‚°ë„(ë…ë„) ë‘ ì„¬ì„ ëª…í™•íˆ í‘œê¸°.", source: "íŒ”ë„ì´ë„ [2]", type: "map" },
            { year: 1531, event: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", desc: "ìš°ì‚°ë„ì™€ ìš¸ë¦‰ë„ê°€ ìš¸ì§„í˜„ ì†Œì†ì„ì„ ê¸°ìˆ .", source: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ [1]", type: "korea_record" },
            { year: 1667, event: "ì€ì£¼ì‹œì²­í•©ê¸°", desc: "ì¼ë³¸ ì˜¤í‚¤ì„¬ì„ ê²½ê³„ë¡œ ì„¤ì •í•˜ì—¬ ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ ì¡°ì„  ë•…ìœ¼ë¡œ ì¸ì‹ (ì¼ë³¸ ë¬¸í—Œ).", source: "ì€ì£¼ì‹œì²­í•©ê¸° [3, 4]", type: "japan_record" },
            { year: 1693, event: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì•ˆìš©ë³µì´ ì¼ë³¸ ì–´ë¶€ë“¤ì—ê²Œ ë‚©ì¹˜ëœ í›„ ë…ë„ê°€ ì¡°ì„  ì˜í† ì„ì„ ê°•ë ¥íˆ ì£¼ì¥.", source: "ì„±í˜¸ì‚¬ì„¤ ë“± [5]", type: "conflict" },
            { year: 1695, event: "ë—í† ë¦¬ë²ˆ ë‹µë³€ì„œ", desc: "ì¼ë³¸ ë—í† ë¦¬ë²ˆì´ ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ë³¸êµ­ ì†Œì†ì´ ì•„ë‹˜ì„ ì—ë„ ë§‰ë¶€ì— ê³µì‹ ë‹µë³€.", source: "ë—í† ë¦¬ë²ˆ ë‹µë³€ì„œ [6, 7]", type: "japan_record" },
            { year: 1696, event: "ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹", desc: "ì•ˆìš©ë³µì˜ 2ì°¨ ë„ì¼ ë° ì¼ë³¸ ë§‰ë¶€ì˜ 'ì£½ë„(ìš¸ë¦‰ë„) ë„í•´ ê¸ˆì§€ë ¹' í•˜ë‹¬.", source: "ì›ë¡9ë³‘ìë…„ ì¡°ì„ ì£¼ì°©ì•ˆ ì¼ê¶Œì§€ê°ì„œ [6, 7]", type: "japan_record" },
            { year: 1697, event: "ìˆ˜í† ê´€ ì œë„ ì‹œí–‰", desc: "ì¡°ì„  ì •ë¶€ê°€ 3ë…„ì— í•œ ë²ˆì”© ë…ë„ ì£¼ë³€ì„ ì‹œì°°í•˜ëŠ” ì œë„ ì‹ ì„¤ (1894ë…„ê¹Œì§€ ìœ ì§€).", source: "ìˆ˜í† ê´€ ì œë„ [7]", type: "korea_record" },
            { year: 1779, event: "ê°œì • ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„", desc: "ìš¸ë¦‰ë„ì™€ ë…ë„ë¥¼ ì¼ë³¸ ì˜ì—­ ë°–ì˜ ì„¬ìœ¼ë¡œ ë‚˜íƒ€ëƒ„ (ì¼ë³¸ ì§€ë„).", source: "ê°œì • ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„ [2]", type: "map" },
            { year: 1785, event: "ì‚¼êµ­ì ‘ì–‘ì§€ë„", desc: "ìš¸ë¦‰ë„ì™€ ë…ë„ë¥¼ ì¡°ì„ ê³¼ ê°™ì€ í™©ìƒ‰ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ ëª…ê¸° (í•˜ì•¼ì‹œ ì‹œí—¤ì´).", source: "ì‚¼êµ­ì ‘ì–‘ì§€ë„ [8]", type: "map" },
            { year: 1808, event: "ë§Œê¸°ìš”ëŒ ê¸°ë¡", desc: "'ìš°ì‚°ì€ ì™œì¸ë“¤ì´ ë§í•˜ëŠ” ì†¡ë„(ë…ë„)ì´ë‹¤'ë¼ê³  ê¸°ë¡í•˜ì—¬ ë…ë„ ëª…ì¹­ ê´€ê³„ ëª…í™•í™”.", source: "ë§Œê¸°ìš”ëŒ [9]", type: "korea_record" },
            { year: 1870, event: "ì¡°ì„ êµ­ êµì œì‹œë§ ë‚´íƒì„œ", desc: "ì¼ë³¸ ì™¸ë¬´ì„± ê´€ë£Œë“¤ì´ ë…ë„ê°€ ì¡°ì„  ì˜í† ê°€ ëœ ì‚¬ì •ì„ ë³´ê³ .", source: "ì¡°ì„ êµ­ êµì œì‹œë§ ë‚´íƒì„œ [4]", type: "japan_record" },
            { year: 1877, event: "íƒœì •ê´€ ì§€ë ¹", desc: "ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€(íƒœì •ê´€)ì´ ë…ë„ì™€ ìš¸ë¦‰ë„ê°€ ì¼ë³¸ê³¼ ê´€ê³„ì—†ìŒì„ ìµœì¢… ê²°ì •.", source: "íƒœì •ê´€ ì§€ë ¹ [4, 10]", type: "japan_record" },
            { year: 1900, event: "ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸", desc: "ë…ë„(ì„ë„)ë¥¼ ìš¸ë„êµ° ê´€í•  êµ¬ì—­ìœ¼ë¡œ ëª…ë¬¸í™”í•˜ì—¬ êµ­ì œì ìœ¼ë¡œ ì˜ìœ ê¶Œ ì„ í¬.", source: "ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸ [9]", type: "korea_record" },
            { year: 1905, event: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ ì œ40í˜¸", desc: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ ë…ë„ë¥¼ ìêµ­ ì˜í† ë¡œ ë¶ˆë²• í¸ì… ê³ ì‹œ.", source: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ ì œ40í˜¸ [2, 10]", type: "conflict" },
            { year: 1906, event: "ëŒ€í•œì œêµ­ ì§€ë ¹ ì œ3í˜¸", desc: "ì¼ë³¸ì˜ ì˜ì§€ ì£¼ì¥ì— ëŒ€í•´ ëŒ€í•œì œêµ­ ì˜ì •ë¶€ê°€ 'ê·¼ê±° ì—†ìŒ'ì„ ëª…ì‹œ.", source: "ì§€ë ¹ ì œ3í˜¸ [3]", type: "korea_record" },
            { year: 1946, event: "SCAPIN ì œ677í˜¸", desc: "ì „í›„ ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹ìœ¼ë¡œ ì¼ë³¸ì˜ í†µì¹˜ ë²”ìœ„ì—ì„œ ë…ë„ë¥¼ ì œì™¸í•˜ì—¬ í•œêµ­ ì˜í† ë¡œ í‘œì‹œ.", source: "SCAPIN ì œ677í˜¸ [11, 12]", type: "international" },
            { year: 1947, event: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½ 1ì°¨ ì´ˆì•ˆ", desc: "ê°•í™”ì¡°ì•½ ì´ˆê¸° ì´ˆì•ˆì— ë…ë„ë¥¼ í•œêµ­ì— ë°˜í™˜í•  ì˜í† ë¡œ ëª…ê¸°.", source: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½ 1ì°¨ ì´ˆì•ˆ [12]", type: "international" },
            { year: 1951, event: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½ ìµœì¢…ì•ˆ", desc: "ì¼ë³¸ì´ í•œêµ­ ë…ë¦½ì„ ì¸ì •í•˜ê³  ì œì£¼ë„, ìš¸ë¦‰ë„ ë“± í•œêµ­ ì„¬ì— ëŒ€í•œ ê¶Œë¦¬ í¬ê¸° (ë…ë„ê°€ í•œêµ­ì˜í† ì— í¬í•¨ë¨ì„ ì „ì œ).", source: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½ ìµœì¢…ì•ˆ [13]", type: "international" },
            { year: 1952, event: "í‰í™”ì„  ì„ ì–¸", desc: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ë…ë„ë¥¼ í¬í•¨í•œ í•´ì—­ì— ëŒ€í•œ ì£¼ê¶Œ í–‰ì‚¬ì™€ ì–´ì¡± ìì› ë³´í˜¸ë¥¼ ìœ„í•´ í‰í™”ì„  ì„ ì–¸.", source: "í‰í™”ì„ (ì´ìŠ¹ë§Œ ë¼ì¸) [13, 14]", type: "korea_record" },
            { year: 1953, event: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ ê²°ì„±", desc: "ì¼ë³¸ì˜ ë¶ˆë²• ì¹¨íˆ¬ì— ëŒ€ì‘í•´ í™ìˆœì¹  ë“± ë¯¼ê°„ì¸ë“¤ì´ ìë°œì ìœ¼ë¡œ ì¡°ì§í•˜ì—¬ ë…ë„ ìˆ˜í˜¸.", source: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ [15, 16]", type: "conflict" },
            { year: 1965, event: "í•œì¼ê¸°ë³¸ì¡°ì•½", desc: "í•œì¼ êµ­êµ ì •ìƒí™” ì‹œ ì˜ìœ ê¶Œ ì£¼ì¥ì„ ë³‘í–‰í•˜ë˜ í˜„ì¬ì˜ ì ìœ ë¥¼ ìœ ì§€í•˜ê¸°ë¡œ í•©ì˜ (ë…ë„ ë°€ì•½ì„¤).", source: "í•œì¼ê¸°ë³¸ì¡°ì•½ ë° ë…ë„ ë°€ì•½ [17]", type: "international" },
            { year: 1981, event: "ìµœì´ˆ ì£¼ë¯¼ ë“±ë¡", desc: "ìµœì¢…ë• ì”¨ê°€ ì„œë„ì— ê±°ì£¼ì‹œì„¤ì„ ì§“ê³  ì£¼ë¯¼ë“±ë¡ì„ ì´ì „í•˜ì—¬ ë…ë„ë¥¼ ìœ ì¸ë„ë¡œ ë§Œë“¦.", source: "ìµœì´ˆ ì£¼ë¯¼ ìµœì¢…ë• [18]", type: "korea_record" },
            { year: 1998, event: "ì‹ í•œì¼ ì–´ì—…í˜‘ì •", desc: "ë°°íƒ€ì  ê²½ì œìˆ˜ì—­(EEZ) ì¤‘ì²©ìœ¼ë¡œ ë…ë„ ì£¼ë³€ì„ ì¤‘ê°„ìˆ˜ì—­ìœ¼ë¡œ ì„¤ì •.", source: "ì‹ í•œì¼ ì–´ì—…í˜‘ì • [19, 20]", type: "international" },
            { year: 2005, event: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì •", desc: "ì‹œë§ˆë„¤í˜„ì˜ ì¡°ë¡€ ì œì •ìœ¼ë¡œ í•œì¼ ì—­ì‚¬ ê°ˆë“± ë° ì˜ìœ ê¶Œ ë¶„ìŸ ì¬ì í™”.", source: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì • [21]", type: "conflict" },
            { year: 2006, event: "ë…¸ë¬´í˜„ ëŒ€í†µë ¹ íŠ¹ë³„ë‹´í™”", desc: "ë…ë„ ë¬¸ì œì— ëŒ€í•œ ê°•ë ¥í•œ ìˆ˜í˜¸ ì˜ì§€ì™€ ì—­ì‚¬ì  ì •ë‹¹ì„± ì²œëª….", source: "ë…¸ë¬´í˜„ ëŒ€í†µë ¹ íŠ¹ë³„ë‹´í™” [22]", type: "korea_record" },
            { year: 2011, event: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡ ì‹¬í™”", desc: "ì¼ë³¸ ì¤‘í•™êµ ë° ì´ˆë“±í•™êµ êµê³¼ì„œì— 'ë…ë„ ê³ ìœ  ì˜í† ' ë° 'ë¶ˆë²• ì ê±°' ê¸°ìˆ  ê¸‰ì¦.", source: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡ [23-25]", type: "conflict" }
        ];

        // --- State Management ---
        let currentFilter = 'all';
        let searchQuery = '';

        // --- Helper Functions ---
        function getEra(year) {
            if (year < 1900) return 'pre-1900';
            if (year >= 1900 && year <= 1950) return '1900-1950';
            return 'modern';
        }

        function getCategoryLabel(type) {
            const map = {
                'korea_record': 'í•œêµ­ ê¸°ë¡/ì •ì±…',
                'japan_record': 'ì¼ë³¸ ë¬¸í—Œ/ì¸ì •',
                'map': 'ê³ ì§€ë„',
                'conflict': 'ë¶„ìŸ/ìˆ˜í˜¸ í™œë™',
                'international': 'êµ­ì œ ì¡°ì•½/í˜‘ì •'
            };
            return map[type] || 'ê¸°íƒ€';
        }

        function getCategoryColor(type) {
             const map = {
                'korea_record': '#3b82f6', // blue-500
                'japan_record': '#ef4444', // red-500
                'map': '#eab308', // yellow-500
                'conflict': '#f97316', // orange-500
                'international': '#8b5cf6' // violet-500
            };
            return map[type] || '#94a3b8';
        }

        function getCategoryIcon(type) {
             const map = {
                'korea_record': 'ğŸ“˜',
                'japan_record': 'ğŸ“•',
                'map': 'ğŸ—ºï¸',
                'conflict': 'âš”ï¸',
                'international': 'âš–ï¸'
            };
            return map[type] || 'ğŸ“„';
        }

        // --- DOM Rendering ---
        const timelineContainer = document.getElementById('timeline-container');
        const noResults = document.getElementById('no-results');

        function renderTimeline() {
            timelineContainer.innerHTML = '';
            
            const filteredData = rawData.filter(item => {
                const matchesFilter = currentFilter === 'all' || getEra(item.year) === currentFilter;
                const matchesSearch = item.event.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                      item.desc.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                      item.year.toString().includes(searchQuery);
                return matchesFilter && matchesSearch;
            });

            if (filteredData.length === 0) {
                noResults.classList.remove('hidden');
                return;
            } else {
                noResults.classList.add('hidden');
            }

            filteredData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = "timeline-item relative pl-8 pb-10 group";
                
                // Colors for border and dots based on type
                const color = getCategoryColor(item.type);
                const icon = getCategoryIcon(item.type);
                const label = getCategoryLabel(item.type);

                card.innerHTML = `
                    <!-- Node Dot -->
                    <div class="timeline-node absolute left-0 top-0 w-8 h-8 rounded-full border-4 border-stone-100 flex items-center justify-center text-sm shadow-md transition-transform transform group-hover:scale-110" style="background-color: ${color}; color: white; border-color: #f5f5f4;">
                        ${icon}
                    </div>

                    <!-- Card Content -->
                    <div class="bg-white rounded-lg shadow-sm border border-stone-200 p-5 hover:shadow-md transition-shadow cursor-default">
                        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-3 border-b border-stone-100 pb-2">
                            <div class="flex items-center gap-3">
                                <span class="text-2xl font-bold text-slate-700 font-mono">${item.year}ë…„</span>
                                <span class="px-2 py-0.5 rounded text-xs font-semibold bg-stone-100 text-stone-600 border border-stone-200">${label}</span>
                            </div>
                            <div class="text-xs text-stone-400 mt-1 sm:mt-0 font-mono">
                                ê·¼ê±°: ${item.source}
                            </div>
                        </div>
                        
                        <h3 class="text-xl font-bold text-slate-800 mb-2">${item.event}</h3>
                        <p class="text-stone-600 leading-relaxed">
                            ${item.desc}
                        </p>
                    </div>
                `;
                timelineContainer.appendChild(card);
            });
        }

        function resetFilters() {
            currentFilter = 'all';
            searchQuery = '';
            document.getElementById('searchInput').value = '';
            updateFilterButtons();
            renderTimeline();
            updateCharts();
        }

        // --- Chart Logic ---
        let timelineChartInstance = null;
        let sourceChartInstance = null;

        function initCharts() {
            // Chart 1: Timeline Frequency
            const ctx1 = document.getElementById('timelineChart').getContext('2d');
            
            // Initial data process for charts (always shows full dataset context usually, but let's make it reactive)
            // Actually, keeping charts showing global stats is better for "Dashboard" feel, 
            // but highlighting the active era is nice. Let's show all data.
            
            // Group by Century/Era
            const eras = { '1400-1600': 0, '1601-1800': 0, '1801-1900': 0, '1901-1950': 0, '1951-í˜„ì¬': 0 };
            rawData.forEach(d => {
                if (d.year <= 1600) eras['1400-1600']++;
                else if (d.year <= 1800) eras['1601-1800']++;
                else if (d.year <= 1900) eras['1801-1900']++;
                else if (d.year <= 1950) eras['1901-1950']++;
                else eras['1951-í˜„ì¬']++;
            });

            timelineChartInstance = new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: Object.keys(eras),
                    datasets: [{
                        label: 'ê¸°ë¡/ì‚¬ê±´ ìˆ˜',
                        data: Object.values(eras),
                        backgroundColor: '#475569', // slate-600
                        borderRadius: 4,
                        hoverBackgroundColor: '#1e293b'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => `${ctx.raw}ê±´ì˜ ì£¼ìš” ê¸°ë¡`
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { precision: 0 } },
                        x: { grid: { display: false } }
                    }
                }
            });

            // Chart 2: Source Type
            const ctx2 = document.getElementById('sourceChart').getContext('2d');
            const typeCounts = {};
            rawData.forEach(d => {
                typeCounts[d.type] = (typeCounts[d.type] || 0) + 1;
            });

            sourceChartInstance = new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(typeCounts).map(getCategoryLabel),
                    datasets: [{
                        data: Object.values(typeCounts),
                        backgroundColor: Object.keys(typeCounts).map(getCategoryColor),
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { font: { family: "'Noto Sans KR', sans-serif" }, boxWidth: 12 } }
                    }
                }
            });
        }

        // --- Event Listeners ---
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderTimeline();
        });

        const filterBtns = document.querySelectorAll('.filter-btn');
        function updateFilterButtons() {
            filterBtns.forEach(btn => {
                if(btn.dataset.filter === currentFilter) {
                    btn.classList.remove('bg-stone-100', 'text-stone-600');
                    btn.classList.add('bg-slate-800', 'text-white');
                } else {
                    btn.classList.add('bg-stone-100', 'text-stone-600');
                    btn.classList.remove('bg-slate-800', 'text-white');
                }
            });
        }

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                currentFilter = btn.dataset.filter;
                updateFilterButtons();
                renderTimeline();
            });
        });

        // --- Initialization ---
        initCharts();
        renderTimeline();

    </script>
</body>
</html>
